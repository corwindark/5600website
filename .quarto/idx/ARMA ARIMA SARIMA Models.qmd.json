{"title":"ARMA ARIMA SARIMA MODELS","markdown":{"yaml":{"title":"ARMA ARIMA SARIMA MODELS"},"containsRefs":false,"markdown":"\n\nLoading packages\n\n``` {r}\nlibrary(tidyverse)\nlibrary(quantmod)\nlibrary(forecast)\nlibrary(tseries)\n\n```\n\n\n\nBringing the data into this tab as well:\n\n``` {r}\n\nspyIn <- quantmod::getSymbols(\"SPY\", from = as.Date(\"2021/01/01\"), to = as.Date(\"2023/09/30\"), periodicity = \"daily\", src = \"yahoo\", auto.assign = FALSE)\nqqqIn <- quantmod::getSymbols(\"QQQ\", from = as.Date(\"2021/01/01\"), to = as.Date(\"2023/09/30\"), periodicity = \"daily\", src = \"yahoo\", auto.assign = FALSE)\niwmIn <- quantmod::getSymbols(\"IWM\", from = as.Date(\"2021/01/01\"), to = as.Date(\"2023/09/30\"), periodicity = \"daily\", src = \"yahoo\", auto.assign = FALSE)\n\n\nspyIn$spyRange <- (spyIn$SPY.High - spyIn$SPY.Low)/ spyIn$SPY.Open\nqqqIn$qqqRange <- (qqqIn$QQQ.High - qqqIn$QQQ.Low)/ qqqIn$QQQ.Open\niwmIn$iwmRange <- (iwmIn$IWM.High - iwmIn$IWM.Low)/ iwmIn$IWM.Open\n\n\ndiff1SPY <- diff(spyIn$spyRange)\ndiff1QQQ <- diff(qqqIn$qqqRange)\ndiff1IWM <- diff(iwmIn$iwmRange)\n\n```\n\n\n\n<h2> Stationarity of the time series </h2>\n\nBased on previous results, and the fact that I am using \"pseudo-differenced data\" in that I am taking the percentage range in prices, in addition to a single differencing, means that the time series are stationary\n\n\n<h2> Building ARIMA Model <h2>\n\nSince I did some of this work with SPY data on the EDA tab, I will focus on QQQ range data here.\n\n``` {r}\n#print(diff1QQQ)\nacf(diff1QQQ, na.action = na.exclude)\npacf(diff1QQQ, na.action = na.exclude)\n\n```\n\nBased on these charts the order I would pick for QQQ is: ARIMA(2,1,0)\n\n``` {r}\n\nmodelQQQ1 <- arima(diff1QQQ, order = c(2,1,0))\nsummary(modelQQQ1)\n```\n\n5. Equation is x = -1.0034x(t-1) - 0.4832x(t-2) + error\n\n6. Model Diagnostic:\n``` {r}\n\nstats::tsdiag(modelQQQ1)\n\n```\n\nThe Ljung Box statistics look cood, although the ACF of the residuals does have 1 significant term.\n\nI originally tried a (4,1,2) model, however the ljung box statistics were highly correlated, and I suspected overfitting. After reducing the parametrization greatly, the new model performed mnuch better.\n\n7.\n``` {r}\n\nautoQQQ <- auto.arima(diff1QQQ)\nsummary(autoQQQ)\n```\n\nThe auto.arima method chose an ARIMA(1,0,1) model. However, this model did not perform as well in terms of AIC, with the Auto arima model having a score of -4799 while my model had a score of -4292.\n\n\n8. Forecasting with my model\n\n``` {r}\nplot(forecast(modelQQQ1, 10), xlim = c(650,750))   \n\n```\n\n\nForecasting with auto arima model\n``` {r}\nplot(forecast(autoQQQ, 10), xlim = c(650,750))\n\n```\n\nOverall, my model has a slightly more dynamic prediction than the auto arima function, which quicly levels out to 0. However, my model also has a much wider uncertainty band.\n\n\n9. Compare ARIMA model with benchmarks\n```{r}\n\nnaiveModelQQQ <- naive(diff1QQQ, h=1)\nsnaiveModelQQQ <- snaive(diff1QQQ, h=1)\n\nsummary(naiveModelQQQ)\nsummary(snaiveModelQQQ)\nsummary(modelQQQ1)\n\n```\n\nI fit a naive and seasonal naive model. On RMSE my model had the best performance, with 0.011, while the naive and snaive models had 0.017 rmse each (since there was no seasonal period I realized they were the same model). On MAE my arima model had 0.008 while the seasonal naive models had 0.0122.\n\nLet's compare forecasts:\n```{r}\nplot(forecast(modelQQQ1, 10), xlim = c(650,750)) \n```\n\n```{r}\nplot(forecast(naiveModelQQQ, 10), xlim = c(650,750))   \n```\n\n\nHere, the naive method can only forecast 1 observation into the future, since the seasonal period is one. Which is an advantage to my model, but realistically means the naive model should be evaluated with cross validation.","srcMarkdownNoYaml":"\n\nLoading packages\n\n``` {r}\nlibrary(tidyverse)\nlibrary(quantmod)\nlibrary(forecast)\nlibrary(tseries)\n\n```\n\n\n\nBringing the data into this tab as well:\n\n``` {r}\n\nspyIn <- quantmod::getSymbols(\"SPY\", from = as.Date(\"2021/01/01\"), to = as.Date(\"2023/09/30\"), periodicity = \"daily\", src = \"yahoo\", auto.assign = FALSE)\nqqqIn <- quantmod::getSymbols(\"QQQ\", from = as.Date(\"2021/01/01\"), to = as.Date(\"2023/09/30\"), periodicity = \"daily\", src = \"yahoo\", auto.assign = FALSE)\niwmIn <- quantmod::getSymbols(\"IWM\", from = as.Date(\"2021/01/01\"), to = as.Date(\"2023/09/30\"), periodicity = \"daily\", src = \"yahoo\", auto.assign = FALSE)\n\n\nspyIn$spyRange <- (spyIn$SPY.High - spyIn$SPY.Low)/ spyIn$SPY.Open\nqqqIn$qqqRange <- (qqqIn$QQQ.High - qqqIn$QQQ.Low)/ qqqIn$QQQ.Open\niwmIn$iwmRange <- (iwmIn$IWM.High - iwmIn$IWM.Low)/ iwmIn$IWM.Open\n\n\ndiff1SPY <- diff(spyIn$spyRange)\ndiff1QQQ <- diff(qqqIn$qqqRange)\ndiff1IWM <- diff(iwmIn$iwmRange)\n\n```\n\n\n\n<h2> Stationarity of the time series </h2>\n\nBased on previous results, and the fact that I am using \"pseudo-differenced data\" in that I am taking the percentage range in prices, in addition to a single differencing, means that the time series are stationary\n\n\n<h2> Building ARIMA Model <h2>\n\nSince I did some of this work with SPY data on the EDA tab, I will focus on QQQ range data here.\n\n``` {r}\n#print(diff1QQQ)\nacf(diff1QQQ, na.action = na.exclude)\npacf(diff1QQQ, na.action = na.exclude)\n\n```\n\nBased on these charts the order I would pick for QQQ is: ARIMA(2,1,0)\n\n``` {r}\n\nmodelQQQ1 <- arima(diff1QQQ, order = c(2,1,0))\nsummary(modelQQQ1)\n```\n\n5. Equation is x = -1.0034x(t-1) - 0.4832x(t-2) + error\n\n6. Model Diagnostic:\n``` {r}\n\nstats::tsdiag(modelQQQ1)\n\n```\n\nThe Ljung Box statistics look cood, although the ACF of the residuals does have 1 significant term.\n\nI originally tried a (4,1,2) model, however the ljung box statistics were highly correlated, and I suspected overfitting. After reducing the parametrization greatly, the new model performed mnuch better.\n\n7.\n``` {r}\n\nautoQQQ <- auto.arima(diff1QQQ)\nsummary(autoQQQ)\n```\n\nThe auto.arima method chose an ARIMA(1,0,1) model. However, this model did not perform as well in terms of AIC, with the Auto arima model having a score of -4799 while my model had a score of -4292.\n\n\n8. Forecasting with my model\n\n``` {r}\nplot(forecast(modelQQQ1, 10), xlim = c(650,750))   \n\n```\n\n\nForecasting with auto arima model\n``` {r}\nplot(forecast(autoQQQ, 10), xlim = c(650,750))\n\n```\n\nOverall, my model has a slightly more dynamic prediction than the auto arima function, which quicly levels out to 0. However, my model also has a much wider uncertainty band.\n\n\n9. Compare ARIMA model with benchmarks\n```{r}\n\nnaiveModelQQQ <- naive(diff1QQQ, h=1)\nsnaiveModelQQQ <- snaive(diff1QQQ, h=1)\n\nsummary(naiveModelQQQ)\nsummary(snaiveModelQQQ)\nsummary(modelQQQ1)\n\n```\n\nI fit a naive and seasonal naive model. On RMSE my model had the best performance, with 0.011, while the naive and snaive models had 0.017 rmse each (since there was no seasonal period I realized they were the same model). On MAE my arima model had 0.008 while the seasonal naive models had 0.0122.\n\nLet's compare forecasts:\n```{r}\nplot(forecast(modelQQQ1, 10), xlim = c(650,750)) \n```\n\n```{r}\nplot(forecast(naiveModelQQQ, 10), xlim = c(650,750))   \n```\n\n\nHere, the naive method can only forecast 1 observation into the future, since the seasonal period is one. Which is an advantage to my model, but realistically means the naive model should be evaluated with cross validation."},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"ARMA ARIMA SARIMA Models.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","theme":"sandstone","title":"ARMA ARIMA SARIMA MODELS"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}